package server;

import java.io.*;
import java.net.*;

public class GameClient {
    private static final String SERVER_ADDRESS = "localhost"; // 서버 주소
    private static final int PORT = 12345;

    public static void main(String[] args) {
        try (Socket socket = new Socket(SERVER_ADDRESS, PORT);
             ObjectOutputStream out = new ObjectOutputStream(socket.getOutputStream());
             ObjectInputStream in = new ObjectInputStream(socket.getInputStream());
             BufferedReader userInput = new BufferedReader(new InputStreamReader(System.in))) {

            System.out.println("서버에 연결되었습니다!");

            while (true) {
                System.out.print("명령 입력 (SPAWN/MOVE/ATTACK): ");
                String command = userInput.readLine();

                // 데이터 생성 및 전송
                GameData dataToSend = new GameData(command, "Marine", 100, 200, 1500);
                out.writeObject(dataToSend);
                out.flush();

                // 서버로부터 응답 수신
                GameData responseData = (GameData) in.readObject();
                System.out.println("서버 응답: " + responseData.getCommand());
            }
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
